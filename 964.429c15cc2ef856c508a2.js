(self.webpackChunkfinance_manage=self.webpackChunkfinance_manage||[]).push([[964],{964:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DashboardModule:()=>le});var a=i(5366),n=i(766),r=i(5959);let s=(()=>{class t{constructor(){this.tabChange$=new r.xQ}changeTab(t){this.tabChange$.next(t)}handleChangeTab$(){return this.tabChange$.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})();var o=i(9920),c=i(7112),l=i(7742),h=i(649);let p=(()=>{class t{constructor(){this.userEmail=JSON.parse(localStorage.getItem(o.m.USER_EMAIL)||"")}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-login-toolbar"]],decls:14,vars:7,consts:[["color","primary"],[1,"space-between"],[1,"right-side"],[1,"right-side__user"]],template:function(t,e){1&t&&(a.TgZ(0,"mat-toolbar",0),a.TgZ(1,"mat-toolbar-row",1),a.TgZ(2,"span"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"div",2),a.TgZ(6,"span",3),a.TgZ(7,"strong"),a._uU(8),a.ALo(9,"translate"),a.qZA(),a._uU(10,": "),a.TgZ(11,"span"),a._uU(12),a.qZA(),a.qZA(),a._UZ(13,"app-language-select"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Oqu(a.lcZ(4,3,"financeManagement")),a.xp6(5),a.Oqu(a.lcZ(9,5,"user")),a.xp6(4),a.Oqu(e.userEmail))},directives:[c.Ye,c.rD,l.n],pipes:[h.X$],styles:[".right-side__user[_ngcontent-%COMP%]{margin-right:50px}"]}),t})();var d=i(7173);class g{constructor(t={}){this.currencyCode=t.currencyCode||"UAH",this.balance=(Number(t.amount)||0)+(Number(t.balance)||0),this.updatedAt=(new Date).toISOString()}getParams(){return{balance:this.balance,currencyCode:this.currencyCode,updatedAt:this.updatedAt}}}class u{constructor(t={}){this.balanceInfo=new g(t.balanceInfo)}}var m=i(9764),f=i(9996),x=i(4689),b=i(9822),A=i(9582),v=i(3796);let y=(()=>{class t{constructor(t,e,i){this.angularFireDatabase=t,this.angularFireStorage=e,this.authService=i,this.baseUrl=i.email}add(t,e){const i=this.angularFireDatabase.database.ref(t).set(e);return(0,m.D)(i)}update(t,e){const i=this.angularFireDatabase.database.ref(t).set(e);return(0,m.D)(i)}get(t){const e=this.angularFireDatabase.database.ref(t).once("value");return(0,m.D)(e).pipe((0,f.U)(t=>t.val()))}delete(t){const e=this.angularFireDatabase.database.ref(t).remove();return(0,m.D)(e)}get getBaseUrl(){return this.baseUrl}getDatabase(){return this.angularFireDatabase}uploadFile(t){const e=this.angularFireStorage.upload(t.name,t);return(0,m.D)(e).pipe((0,x.w)(t=>t.ref.getDownloadURL()))}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(b.KQ),a.LFG(A.Q1),a.LFG(v.e))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=i(6278);let M=(()=>{class t{constructor(t,e,i,a){this.dashboardActionService=t,this.httpService=e,this.authService=i,this.cdr=a,this.dashboard=new u({})}ngOnInit(){this.getDashboardInfo(),this.dashboardActionService.handleChangeTab$().subscribe(t=>{this.getDashboardInfo()})}getDashboardInfo(){this.httpService.get(`${this.authService.email}/dashboard`).subscribe(t=>{this.dashboard=new u(t||{}),this.cdr.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s),a.Y36(y),a.Y36(v.e),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-dashboard-info"]],decls:10,vars:7,consts:[[1,"content","row-center"],[1,"row-center"],[1,"balance","col-baseline"]],template:function(t,e){1&t&&(a.TgZ(0,"main",0),a.TgZ(1,"div",1),a.TgZ(2,"span",2),a.TgZ(3,"span"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.TgZ(6,"span"),a._uU(7),a.ALo(8,"translate"),a.qZA(),a.qZA(),a.qZA(),a._UZ(9,"mat-divider"),a.qZA()),2&t&&(a.xp6(4),a.hij("",a.lcZ(5,3,"balance"),":"),a.xp6(3),a.AsE(" ",e.dashboard.balanceInfo.balance," ",a.lcZ(8,5,"UAH"),""))},directives:[C.d],pipes:[h.X$],styles:[".balance[_ngcontent-%COMP%]{margin-top:50px}.balance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:40px;margin:0 20px}"]}),t})();var Z=i(1041),S=i(611),w=i(6238),_=i(6599),T=i(5416),I=i(8512),q=i(3589);let O=(()=>{class t extends y{constructor(){super(...arguments),this.list$=this.getDatabase().list(`${this.getBaseUrl}/transactions`)}createTransaction(t){const e=this.getDatabase().createPushId(),i=this.list$.set(e,Object.assign(Object.assign({},t),{id:e}));return(0,m.D)(i)}deleteTransaction(t){const e=this.list$.remove(t);return(0,m.D)(e)}editTransaction(t,e){const i=this.list$.update(t,e);return(0,m.D)(i)}getTransactions(){return this.list$.valueChanges()}defaultCurrencyCode(){return"UAH"}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(t)))(i||t)}}(),t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),z=(()=>{class t extends y{constructor(){super(...arguments),this.list$=this.getDatabase().list(`${this.getBaseUrl}/budgets`)}createBudget(t){const e=this.getDatabase().createPushId(),i=this.list$.set(e,Object.assign(Object.assign({},t),{id:e}));return(0,m.D)(i)}deleteBudget(t){const e=this.list$.remove(t);return(0,m.D)(e)}editBudget(t,e){const i=this.list$.update(t,e);return(0,m.D)(i)}getBudgets(){return this.list$.valueChanges()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(t)))(i||t)}}(),t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),R=(()=>{class t extends y{constructor(){super(...arguments),this.baseBalanceInfoUrl=`${this.getBaseUrl}/dashboard/balanceInfo`}getUserBalance(){return this.get(`${this.baseBalanceInfoUrl}/balance`)}updateUserBalance(t){return this.update(`${this.baseBalanceInfoUrl}`,t.getParams())}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(t)))(i||t)}}(),t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var P=i(2797),U=i(3070),B=i(9550),k=i(4369);let H=(()=>{class t{constructor(t){this.injector=t}get control(){return this.formControl||this.controlContainer.control.get(this.formControlName)}get controlContainer(){return this.injector.get(Z.gN)}registerOnTouched(t){this.formControlDirective&&this.formControlDirective.valueAccessor.registerOnTouched(t)}registerOnChange(t){this.formControlDirective&&this.formControlDirective.valueAccessor.registerOnChange(t)}writeValue(t){this.formControlDirective&&this.formControlDirective.valueAccessor.writeValue(t)}setDisabledState(t){this.formControlDirective&&this.formControlDirective.valueAccessor.setDisabledState(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.zs3))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&a.Gf(Z.oH,7),2&t){let t;a.iGM(t=a.CRH())&&(e.formControlDirective=t.first)}},inputs:{formControl:"formControl",formControlName:"formControlName"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();var E=i(3841),F=i(1116),D=i(7064);function Q(t,e){if(1&t&&(a.TgZ(0,"mat-option",3),a.TgZ(1,"div",4),a.TgZ(2,"span"),a._uU(3),a.qZA(),a._UZ(4,"img",5),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t),a.xp6(3),a.Oqu(t.name),a.xp6(1),a.Q6J("src",t.imageUrl,a.LSH)}}let Y=(()=>{class t extends H{constructor(t,e,i){super(t),this.injector=t,this.budgetService=e,this.cdr=i,this.budgets=[]}ngOnInit(){this.budgetService.getBudgets().subscribe(t=>{this.budgets=t,this.cdr.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.zs3),a.Y36(z),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-budget-select"]],features:[a._Bn([{provide:Z.JU,useExisting:(0,a.Gpc)(()=>t),multi:!0}]),a.qOj],decls:5,vars:2,consts:[["appearance","fill",1,"w-100"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"select-item"],["alt","",3,"src"]],template:function(t,e){1&t&&(a.TgZ(0,"mat-form-field",0),a.TgZ(1,"mat-label"),a._uU(2,"Budget"),a.qZA(),a.TgZ(3,"mat-select",1),a.YNc(4,Q,5,3,"mat-option",2),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Q6J("formControl",e.control),a.xp6(1),a.Q6J("ngForOf",e.budgets))},directives:[U.KE,U.hX,E.gD,Z.JJ,Z.oH,F.sg,D.ey],styles:[".select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.1em 0}.select-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:60px}"],changeDetection:0}),t})();function J(t,e){if(1&t&&(a.TgZ(0,"mat-option",3),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t),a.xp6(1),a.hij(" ",t," ")}}let L=(()=>{class t extends H{constructor(t,e){super(t),this.injector=t,this.cdr=e,this.percents=[]}ngOnInit(){for(let t=0;t<=100;t++)this.percents.push(t);this.cdr.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.zs3),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-percent-select"]],features:[a._Bn([{provide:Z.JU,useExisting:(0,a.Gpc)(()=>t),multi:!0}]),a.qOj],decls:5,vars:2,consts:[["appearance","fill",1,"w-100"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(a.TgZ(0,"mat-form-field",0),a.TgZ(1,"mat-label"),a._uU(2,"Percent"),a.qZA(),a.TgZ(3,"mat-select",1),a.YNc(4,J,2,2,"mat-option",2),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Q6J("formControl",e.control),a.xp6(1),a.Q6J("ngForOf",e.percents))},directives:[U.KE,U.hX,E.gD,Z.JJ,Z.oH,F.sg,D.ey],styles:[""],changeDetection:0}),t})();var W=i(6489);function j(t,e){if(1&t&&(a.TgZ(0,"div",13),a.TgZ(1,"span",14),a._uU(2,"Percent:"),a.qZA(),a.TgZ(3,"span",15),a._uU(4),a.qZA(),a.TgZ(5,"span",16),a._uU(6,"*"),a.qZA(),a.TgZ(7,"span",15),a._uU(8),a.qZA(),a.TgZ(9,"span",16),a._uU(10,"="),a.qZA(),a.TgZ(11,"span",15),a._uU(12),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(4),a.Oqu(t.calcTransaction.amount),a.xp6(4),a.Oqu(t.calcTransaction.percent),a.xp6(4),a.Oqu(t.calcTransaction.total)}}function N(t,e){if(1&t&&(a.TgZ(0,"div",13),a.TgZ(1,"span",14),a._uU(2,"Balance:"),a.qZA(),a.TgZ(3,"span",15),a._uU(4),a.qZA(),a.TgZ(5,"span",16),a._uU(6,"-"),a.qZA(),a.TgZ(7,"span",15),a._uU(8),a.qZA(),a.TgZ(9,"span",16),a._uU(10,"="),a.qZA(),a.TgZ(11,"span",15),a._uU(12),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(4),a.Oqu(t.calcTransaction.userBalance),a.xp6(4),a.Oqu(t.calcTransaction.total),a.xp6(4),a.Oqu(t.calcTransaction.totalUserBalance)}}let X=(()=>{class t{constructor(t,e,i,a,n,s,o,c,l){this.fb=t,this.httpService=e,this.authService=i,this.snackBar=a,this.translateService=n,this.transactionService=s,this.budgetService=o,this.userService=c,this.cdr=l,this.panelOpenState=!0,this.userBalance=0,this.updateTransactionCalc$=new I.X(null),this.destroySubject$=new r.xQ,this.createBalanceForm=this.fb.group({amount:this.fb.control(null,[Z.kI.pattern(/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/),Z.kI.required,Z.kI.min(0)])}),this.createTransactionForm=this.fb.group({budget:this.fb.control(null,[Z.kI.required]),percent:this.fb.control(10,[Z.kI.required]),amount:this.fb.control(0,[Z.kI.required,Z.kI.pattern(/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/)])})}ngOnInit(){this.initData(),this.detectCalcTransaction()}ngOnDestroy(){this.destroySubject$.next(),this.destroySubject$.complete()}createBalance(){console.log(`${this.authService.email}/dashboard/balanceInfo`),this.httpService.get(`${this.authService.email}/dashboard/balanceInfo`).pipe((0,S.q)(1)).subscribe(t=>{const e=new g(Object.assign(Object.assign({},this.createBalanceForm.value),t)).getParams(),i=this.translateService.instant("youBalanceWasUpdated"),a=this.translateService.instant("info");this.httpService.update(`${this.authService.email}/dashboard/balanceInfo`,e).subscribe(t=>{this.snackBar.open(i,a),this.createBalanceForm.reset({amount:0}),this.initData()})})}calcTotalTransaction(){this.createTransactionForm.valueChanges.pipe((0,w.O)(this.createTransactionForm.value),(0,f.U)(({amount:t,percent:e})=>({percent:+e/100,amount:+(+t).toFixed(2),total:+Math.abs(+e/100*+t).toFixed(2)})),(0,f.U)(t=>Object.assign(Object.assign({},t),{userBalance:+this.userBalance.toFixed(2),totalUserBalance:+(this.userBalance-t.total).toFixed(2)})),(0,_.b)(t=>{this.calcTransaction=t,this.cdr.markForCheck()}),(0,S.q)(1)).subscribe()}initData(){this.userService.getUserBalance().subscribe(t=>{var e;this.userBalance=+t.toFixed(2),null===(e=this.createTransactionForm.get("amount"))||void 0===e||e.patchValue(this.userBalance),this.updateCalcTransaction()})}detectCalcTransaction(){this.createTransactionForm.valueChanges.pipe((0,T.R)(this.destroySubject$)).subscribe(()=>this.updateCalcTransaction()),this.updateTransactionCalc$.asObservable().pipe((0,T.R)(this.destroySubject$)).subscribe(()=>{this.calcTotalTransaction()})}updateCalcTransaction(){this.updateTransactionCalc$.next()}createTransaction(){var t;const e=null===(t=this.createTransactionForm.get("budget"))||void 0===t?void 0:t.value,i=new g({amount:-this.calcTransaction.total,balance:this.userBalance});this.userService.updateUserBalance(i).subscribe(t=>{const a={balance:(e.balance||0)+this.calcTransaction.total,imageUrl:e.imageUrl,name:e.name,currencyCode:this.transactionService.defaultCurrencyCode()},n={balance:i.getParams().balance,imageUrl:"",currencyCode:this.transactionService.defaultCurrencyCode()};this.transactionService.createTransaction({id:this.transactionService.getDatabase().createPushId(),user:n,budget:a,createdAt:(new Date).toISOString(),currencyCode:this.transactionService.defaultCurrencyCode(),amount:this.calcTransaction.total,type:"budget"}).subscribe(()=>{var t;null===(t=this.createTransactionForm.get("budget"))||void 0===t||t.reset(null),this.budgetService.editBudget(e.id||"",{balance:a.balance,currencyCode:a.currencyCode}),this.initData()})})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(Z.qu),a.Y36(y),a.Y36(v.e),a.Y36(q.ux),a.Y36(h.sK),a.Y36(O),a.Y36(z),a.Y36(R),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-dashboard-manage"]],decls:49,vars:32,consts:[[1,"content"],[1,"base-mt"],["autocomplete","off",1,"form","form-balance",3,"formGroup","ngSubmit"],["appearance","fill"],["formControlName","amount","matInput",""],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"d-flex","space-between"],["formControlName","budget",1,"w-100"],[1,"form__double"],["formControlName","percent"],[1,"w-100","mat-form-field-wrapper"],["hideToggle","",3,"expanded"],["class","calc-total-transaction",4,"ngIf"],[1,"calc-total-transaction"],[1,"calc-total-transaction__label"],[1,""],[1,"calc-total-transaction__symbol"]],template:function(t,e){1&t&&(a.TgZ(0,"main",0),a.TgZ(1,"mat-card",1),a.TgZ(2,"mat-card-title"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"form",2),a.NdJ("ngSubmit",function(){return e.createBalance()}),a.TgZ(6,"mat-form-field",3),a.TgZ(7,"mat-label"),a._uU(8),a.ALo(9,"translate"),a.qZA(),a._UZ(10,"input",4),a.qZA(),a.TgZ(11,"button",5),a._uU(12),a.ALo(13,"translate"),a.qZA(),a.qZA(),a.qZA(),a._UZ(14,"mat-divider"),a.TgZ(15,"mat-card",1),a.TgZ(16,"mat-card-title"),a.TgZ(17,"div",6),a.TgZ(18,"span"),a._uU(19),a.ALo(20,"translate"),a.qZA(),a.TgZ(21,"span"),a.TgZ(22,"strong"),a._uU(23),a.ALo(24,"translate"),a.qZA(),a._uU(25),a.ALo(26,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(27,"form",2),a.NdJ("ngSubmit",function(){return e.createTransaction()}),a._UZ(28,"app-budget-select",7),a.TgZ(29,"div",8),a.TgZ(30,"mat-form-field",3),a.TgZ(31,"mat-label"),a._uU(32),a.ALo(33,"translate"),a.qZA(),a._UZ(34,"input",4),a.qZA(),a._UZ(35,"app-percent-select",9),a.qZA(),a.TgZ(36,"mat-accordion",10),a.TgZ(37,"mat-expansion-panel",11),a.TgZ(38,"mat-expansion-panel-header"),a.TgZ(39,"mat-panel-title"),a._uU(40," Calculator "),a.qZA(),a.TgZ(41,"mat-panel-description"),a._uU(42," This is a summary of the calculation "),a.qZA(),a.qZA(),a.YNc(43,j,13,3,"div",12),a._UZ(44,"mat-divider"),a.YNc(45,N,13,3,"div",12),a.qZA(),a.qZA(),a.TgZ(46,"button",5),a._uU(47),a.ALo(48,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.hij(" ",a.lcZ(4,16,"topUpYourAccount")," "),a.xp6(2),a.Q6J("formGroup",e.createBalanceForm),a.xp6(3),a.Oqu(a.lcZ(9,18,"amount")),a.xp6(3),a.Q6J("disabled",e.createBalanceForm.invalid),a.xp6(1),a.hij(" ",a.lcZ(13,20,"submit")," "),a.xp6(7),a.Oqu(a.lcZ(20,22,"makeATransaction")),a.xp6(4),a.hij("",a.lcZ(24,24,"balance"),":"),a.xp6(2),a.AsE(" ",e.userBalance," ",a.lcZ(26,26,"UAH")," "),a.xp6(2),a.Q6J("formGroup",e.createTransactionForm),a.xp6(5),a.Oqu(a.lcZ(33,28,"amount")),a.xp6(5),a.Q6J("expanded",!0),a.xp6(6),a.Q6J("ngIf",e.calcTransaction),a.xp6(2),a.Q6J("ngIf",e.calcTransaction),a.xp6(1),a.Q6J("disabled",e.createTransactionForm.invalid||e.calcTransaction&&e.calcTransaction.totalUserBalance<=0),a.xp6(1),a.hij(" ",a.lcZ(48,30,"submit")," "))},directives:[P.a8,P.n5,Z._Y,Z.JL,Z.sg,U.KE,U.hX,Z.Fj,B.Nt,Z.JJ,Z.u,k.lW,C.d,Y,L,W.pp,W.ib,W.yz,W.yK,W.u4,F.O5],pipes:[h.X$],styles:[".form-balance[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-balance[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto}.calc-total-transaction[_ngcontent-%COMP%]{padding:1em 0;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr}.calc-total-transaction[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px;display:flex;align-items:center;justify-content:center}.calc-total-transaction__label[_ngcontent-%COMP%]{font-size:20px!important;justify-content:unset;color:#a71cff}.calc-total-transaction__symbol[_ngcontent-%COMP%]{color:#a0a8a8}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-grow:unset!important}"]}),t})();var $=i(5078),V=i(7307);function G(t,e){if(1&t&&(a.TgZ(0,"mat-card"),a.TgZ(1,"mat-card-content"),a.TgZ(2,"mat-list",2),a.TgZ(3,"mat-list-item",3),a.TgZ(4,"mat-icon",4),a._uU(5,"paid"),a.qZA(),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"div",7),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.TgZ(11,"div",7),a._uU(12),a.ALo(13,"translate"),a.qZA(),a.TgZ(14,"div",7),a._uU(15),a.ALo(16,"translate"),a.qZA(),a.TgZ(17,"div",7),a._uU(18),a.ALo(19,"translate"),a.qZA(),a.TgZ(20,"div",7),a._uU(21),a.ALo(22,"translate"),a.qZA(),a.TgZ(23,"div",8),a._uU(24),a.ALo(25,"translate"),a.qZA(),a.TgZ(26,"div",8),a._uU(27),a.ALo(28,"currency"),a.qZA(),a.TgZ(29,"div",8),a._uU(30),a.ALo(31,"date"),a.qZA(),a.TgZ(32,"div",8),a._uU(33),a.ALo(34,"currency"),a.qZA(),a.TgZ(35,"div",8),a._uU(36),a.ALo(37,"currency"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(9),a.Oqu(a.lcZ(10,10,"transactionType")),a.xp6(3),a.Oqu(a.lcZ(13,12,"amount")),a.xp6(3),a.Oqu(a.lcZ(16,14,"createdAt")),a.xp6(3),a.Oqu(a.lcZ(19,16,"userBalance")),a.xp6(3),a.Oqu(a.lcZ(22,18,"budgetBalance")),a.xp6(3),a.hij(" ",a.lcZ(25,20,t.type)," "),a.xp6(3),a.hij(" ",a.Dn7(28,22,t.amount,t.currencyCode,"symbol-narrow")," "),a.xp6(3),a.hij(" ",a.xi3(31,26,t.createdAt,"M/d/yy, HH:mm")," "),a.xp6(3),a.hij(" ",a.Dn7(34,29,(null==t||null==t.user?null:t.user.balance)||0,(null==t||null==t.user?null:t.user.currencyCode)||"UAH","symbol-narrow")," "),a.xp6(3),a.hij(" ",a.Dn7(37,33,(null==t||null==t.budget?null:t.budget.balance)||0,(null==t||null==t.budget?null:t.budget.currencyCode)||"UAH","symbol-narrow")," ")}}let K=(()=>{class t{constructor(t,e){this.transactionService=t,this.cdr=e,this.transactions=[]}ngOnInit(){this.transactionService.getTransactions().subscribe(t=>{t.forEach(t=>{this.transactions.unshift(t)}),this.cdr.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(O),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-dashboard-history"]],decls:2,vars:1,consts:[[1,"content"],[4,"ngFor","ngForOf"],["role","list",1,"list"],["role","listitem",1,"list__item"],["mat-list-icon",""],["mat-line",""],[1,"list__grid"],[1,"list__grid-item","title"],[1,"list__grid-item"]],template:function(t,e){1&t&&(a.TgZ(0,"main",0),a.YNc(1,G,38,37,"mat-card",1),a.qZA()),2&t&&(a.xp6(1),a.Q6J("ngForOf",e.transactions))},directives:[F.sg,P.a8,P.dn,$.i$,$.Tg,V.Hw,$.Nh,D.X2],pipes:[h.X$,F.H9,F.uU],styles:["mat-card[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.list__item[_ngcontent-%COMP%], .list__item[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{display:block;width:100%}.list__item[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:block}.list__grid[_ngcontent-%COMP%]{display:grid;grid-gap:.5em;gap:.5em;grid-template-columns:1fr 1fr 1fr 1fr 1fr}.list__grid-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.list__grid-item.title[_ngcontent-%COMP%]{color:#a0a8a8}"],changeDetection:0}),t})();var tt=i(2935),et=i(878),it=i(8230);function at(t,e){if(1&t&&(a.ynx(0),a._uU(1),a.ALo(2,"translate"),a.BQk()),2&t){const t=e.ngIf;a.xp6(1),a.Oqu(a.lcZ(2,1,t))}}function nt(t,e){if(1&t&&(a.ynx(0),a.YNc(1,at,3,3,"ng-container",2),a.BQk()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",null==t.data?null:t.data.title)}}function rt(t,e){if(1&t&&(a.TgZ(0,"div",8),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t){const t=e.ngIf;a.xp6(1),a.Oqu(a.lcZ(2,1,t))}}function st(t,e){if(1&t&&(a.ynx(0),a.YNc(1,rt,3,3,"div",7),a.BQk()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",null==t.data?null:t.data.message)}}const ot=[[["","header",""]],[["","content",""]]],ct=["[header]","[content]"];let lt=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e,this.isPopup=!0,this.cancelBtnName="cancel",this.disableCancelBtn=!1,this.submitBtnName="submit",this.disableSubmitBtn=!1,this.handleSubmit=new a.vpe,this.handleCancel=new a.vpe}cancel(){this.handleCancel.emit(),this.isPopup&&this.dialogRef.close({isConfirm:!1})}submit(){this.handleSubmit.emit(),this.isPopup&&this.dialogRef.close({isConfirm:!0})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(tt.WI),a.Y36(tt.so))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-confirm-popup-wrapper"]],inputs:{isPopup:"isPopup",cancelBtnName:"cancelBtnName",disableCancelBtn:"disableCancelBtn",submitBtnName:"submitBtnName",disableSubmitBtn:"disableSubmitBtn"},outputs:{handleSubmit:"handleSubmit",handleCancel:"handleCancel"},ngContentSelectors:ct,decls:15,vars:12,consts:[[1,"popup-container"],[1,"popup-container__header"],[4,"ngIf"],[1,"popup-container__content"],[1,"popup-container__footer","btn-double","row-center"],["mat-raised-button","","color","warn",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","text-center",4,"ngIf"],[1,"text-center"]],template:function(t,e){1&t&&(a.F$t(ot),a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h3"),a.YNc(3,nt,2,1,"ng-container",2),a.Hsn(4),a.qZA(),a.qZA(),a.TgZ(5,"div",3),a.YNc(6,st,2,1,"ng-container",2),a.Hsn(7,1),a.qZA(),a.TgZ(8,"div",4),a.TgZ(9,"button",5),a.NdJ("click",function(){return e.cancel()}),a._uU(10),a.ALo(11,"translate"),a.qZA(),a.TgZ(12,"button",6),a.NdJ("click",function(){return e.submit()}),a._uU(13),a.ALo(14,"translate"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.ekj("text-center",e.isPopup),a.xp6(2),a.Q6J("ngIf",e.isPopup),a.xp6(3),a.Q6J("ngIf",e.isPopup),a.xp6(3),a.Q6J("disabled",e.disableCancelBtn),a.xp6(1),a.hij(" ",a.lcZ(11,8,e.cancelBtnName)," "),a.xp6(2),a.Q6J("disabled",e.disableSubmitBtn),a.xp6(1),a.hij(" ",a.lcZ(14,10,e.submitBtnName)," "))},directives:[F.O5,k.lW],pipes:[h.X$],styles:["h3[_ngcontent-%COMP%]{padding:0;margin:0}"],changeDetection:0}),t})();var ht=i(1520);function pt(t,e,i,a){return new(i||(i=Promise))(function(n,r){function s(t){try{c(a.next(t))}catch(e){r(e)}}function o(t){try{c(a.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,o)}c((a=a.apply(t,e||[])).next())})}var dt=i(9624);const gt=["wrapper"],ut=["sourceImage"];function mt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"img",4,5),a.NdJ("load",function(){return a.CHM(t),a.oxw().imageLoadedInView()}),a.qZA()}if(2&t){const t=a.oxw();a.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),a.Q6J("src",t.safeImgDataUrl,a.LSH)}}function ft(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"span",9),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"topleft")})("touchstart",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"topleft")}),a._UZ(2,"span",10),a.qZA(),a.TgZ(3,"span",11),a._UZ(4,"span",10),a.qZA(),a.TgZ(5,"span",12),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"topright")})("touchstart",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"topright")}),a._UZ(6,"span",10),a.qZA(),a.TgZ(7,"span",13),a._UZ(8,"span",10),a.qZA(),a.TgZ(9,"span",14),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"bottomright")})("touchstart",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"bottomright")}),a._UZ(10,"span",10),a.qZA(),a.TgZ(11,"span",15),a._UZ(12,"span",10),a.qZA(),a.TgZ(13,"span",16),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"bottomleft")})("touchstart",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"bottomleft")}),a._UZ(14,"span",10),a.qZA(),a.TgZ(15,"span",17),a._UZ(16,"span",10),a.qZA(),a.TgZ(17,"span",18),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"top")})("touchstart",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"top")}),a.qZA(),a.TgZ(18,"span",19),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"right")})("touchstart",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"right")}),a.qZA(),a.TgZ(19,"span",20),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"bottom")})("touchstart",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"bottom")}),a.qZA(),a.TgZ(20,"span",21),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"left")})("touchstart",function(e){a.CHM(t);const i=a.oxw(2);return i.startMove(e,i.moveTypes.Resize,"left")}),a.qZA(),a.BQk()}}function xt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",6),a.NdJ("keydown",function(e){return a.CHM(t),a.oxw().keyboardAccess(e)}),a.TgZ(1,"div",7),a.NdJ("mousedown",function(e){a.CHM(t);const i=a.oxw();return i.startMove(e,i.moveTypes.Move)})("touchstart",function(e){a.CHM(t);const i=a.oxw();return i.startMove(e,i.moveTypes.Move)}),a.qZA(),a.YNc(2,ft,21,0,"ng-container",8),a.qZA()}if(2&t){const t=a.oxw();a.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),a.ekj("rounded",t.roundCropper),a.xp6(2),a.Q6J("ngIf",!t.hideResizeSquares)}}const bt={Move:"move",Resize:"resize",Pinch:"pinch"};let At=(()=>{class t{crop(t,e,i,a){const n=this.getImagePosition(t,e,i,a),r=n.x2-n.x1,s=n.y2-n.y1,o=document.createElement("canvas");o.width=r,o.height=s;const c=o.getContext("2d");if(!c)return;null!=a.backgroundColor&&(c.fillStyle=a.backgroundColor,c.fillRect(0,0,r,s));const l=(a.transform.scale||1)*(a.transform.flipH?-1:1),h=(a.transform.scale||1)*(a.transform.flipV?-1:1),p=e.transformed;c.setTransform(l,0,0,h,p.size.width/2,p.size.height/2),c.translate(-n.x1/l,-n.y1/h),c.rotate((a.transform.rotate||0)*Math.PI/180),c.drawImage(p.image,-p.size.width/2,-p.size.height/2);const d={width:r,height:s,imagePosition:n,cropperPosition:Object.assign({},i)};a.containWithinAspectRatio&&(d.offsetImagePosition=this.getOffsetImagePosition(t,e,i,a));const g=this.getResizeRatio(r,s,a);return 1!==g&&(d.width=Math.round(r*g),d.height=a.maintainAspectRatio?Math.round(d.width/a.aspectRatio):Math.round(s*g),function(t,e,i){const a=t.width,n=t.height,r=a/(e=Math.round(e)),s=n/(i=Math.round(i)),o=Math.ceil(r/2),c=Math.ceil(s/2),l=t.getContext("2d");if(l){const h=l.getImageData(0,0,a,n),p=l.createImageData(e,i),d=h.data,g=p.data;for(let t=0;t<i;t++)for(let i=0;i<e;i++){const l=4*(i+t*e),h=t*s;let p=0,u=0,m=0,f=0,x=0,b=0,A=0;const v=Math.floor(i*r),y=Math.floor(t*s);let C=Math.ceil((i+1)*r),M=Math.ceil((t+1)*s);C=Math.min(C,a),M=Math.min(M,n);for(let t=y;t<M;t++){const e=Math.abs(h-t)/c,n=i*r,s=e*e;for(let i=v;i<C;i++){const e=Math.abs(n-i)/o,r=Math.sqrt(s+e*e);if(r>=1)continue;p=2*r*r*r-3*r*r+1;const c=4*(i+t*a);A+=p*d[c+3],m+=p,d[c+3]<255&&(p=p*d[c+3]/250),f+=p*d[c],x+=p*d[c+1],b+=p*d[c+2],u+=p}}g[l]=f/u,g[l+1]=x/u,g[l+2]=b/u,g[l+3]=A/m}t.width=e,t.height=i,l.putImageData(p,0,0)}}(o,d.width,d.height)),d.base64=o.toDataURL("image/"+a.format,this.getQuality(a)),d}getImagePosition(t,e,i,a){const n=e.transformed.size.width/t.nativeElement.offsetWidth,r={x1:Math.round(i.x1*n),y1:Math.round(i.y1*n),x2:Math.round(i.x2*n),y2:Math.round(i.y2*n)};return a.containWithinAspectRatio||(r.x1=Math.max(r.x1,0),r.y1=Math.max(r.y1,0),r.x2=Math.min(r.x2,e.transformed.size.width),r.y2=Math.min(r.y2,e.transformed.size.height)),r}getOffsetImagePosition(t,e,i,a){const n=e.transformed.size.width/t.nativeElement.offsetWidth;let r,s;(a.canvasRotation+e.exifTransform.rotate)%2?(r=(e.transformed.size.width-e.original.size.height)/2,s=(e.transformed.size.height-e.original.size.width)/2):(r=(e.transformed.size.width-e.original.size.width)/2,s=(e.transformed.size.height-e.original.size.height)/2);const o={x1:Math.round(i.x1*n)-r,y1:Math.round(i.y1*n)-s,x2:Math.round(i.x2*n)-r,y2:Math.round(i.y2*n)-s};return a.containWithinAspectRatio||(o.x1=Math.max(o.x1,0),o.y1=Math.max(o.y1,0),o.x2=Math.min(o.x2,e.transformed.size.width),o.y2=Math.min(o.y2,e.transformed.size.height)),o}getResizeRatio(t,e,i){const a=i.resizeToWidth/t,n=i.resizeToHeight/e,r=new Array;i.resizeToWidth>0&&r.push(a),i.resizeToHeight>0&&r.push(n);const s=0===r.length?1:Math.min(...r);return s>1&&!i.onlyScaleDown?s:Math.min(s,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,a.Yz7)({factory:function(){return new t},token:t,providedIn:"root"}),t})();class vt{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=void 0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(t){Object.keys(t).filter(t=>t in this).forEach(e=>this[e]=t[e]),this.validateOptions()}setOptionsFromChanges(t){Object.keys(t).filter(t=>t in this).forEach(e=>this[e]=t[e].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}let yt=(()=>{class t{constructor(){this.autoRotateSupported=new Promise(t=>{const e=new Image;e.onload=()=>{t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}loadImageFile(t,e){return new Promise((i,a)=>{const n=new FileReader;n.onload=n=>{this.loadImage(n.target.result,t.type,e).then(i).catch(a)},n.readAsDataURL(t)})}loadImage(t,e,i){return this.isValidImageType(e)?this.loadBase64Image(t,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}loadImageFromURL(t,e){return new Promise((i,a)=>{const n=new Image;n.onerror=()=>a,n.onload=()=>{const t=document.createElement("canvas"),a=t.getContext("2d");t.width=n.width,t.height=n.height,a.drawImage(n,0,0),this.loadBase64Image(t.toDataURL(),e).then(i)},n.crossOrigin="anonymous",n.src=t})}loadBase64Image(t,e){return new Promise((e,i)=>{const a=new Image;a.onload=()=>e({originalImage:a,originalBase64:t}),a.onerror=i,a.src=t}).then(t=>this.transformImageBase64(t,e))}transformImageBase64(t,e){return pt(this,void 0,void 0,function*(){const i=yield this.autoRotateSupported,a=yield function(t){switch("string"==typeof t&&(t=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),i=e.length,a=new Uint8Array(i);for(let n=0;n<i;n++)a[n]=e.charCodeAt(n);return a.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;const i=e.byteLength;let a=2;for(;a<i;){if(e.getUint16(a+2,!1)<=8)return-1;const t=e.getUint16(a,!1);if(a+=2,65505==t){if(1165519206!=e.getUint32(a+=2,!1))return-1;const t=18761==e.getUint16(a+=6,!1);a+=e.getUint32(a+4,t);const i=e.getUint16(a,t);a+=2;for(let n=0;n<i;n++)if(274==e.getUint16(a+12*n,t))return e.getUint16(a+12*n+8,t)}else{if(65280!=(65280&t))break;a+=e.getUint16(a,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(i?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?this.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a},e):Promise.reject(new Error("No image loaded"))})}transformLoadedImage(t,e){return pt(this,void 0,void 0,function*(){const i=e.canvasRotation+t.exifTransform.rotate,a={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===i&&!t.exifTransform.flip&&!e.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},a)},transformed:{base64:t.original.base64,image:t.original.image,size:Object.assign({},a)},exifTransform:t.exifTransform};const n=this.getTransformedSize(a,t.exifTransform,e),r=document.createElement("canvas");r.width=n.width,r.height=n.height;const s=r.getContext("2d");s.setTransform(t.exifTransform.flip?-1:1,0,0,1,r.width/2,r.height/2),s.rotate(Math.PI*(i/2)),s.drawImage(t.original.image,-a.width/2,-a.height/2);const o=r.toDataURL(),c=yield this.loadImageFromBase64(o);return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},a)},transformed:{base64:o,image:c,size:{width:c.width,height:c.height}},exifTransform:t.exifTransform}})}loadImageFromBase64(t){return new Promise((e,i)=>{const a=new Image;a.onload=()=>e(a),a.onerror=i,a.src=t})}getTransformedSize(t,e,i){const a=i.canvasRotation+e.rotate;if(i.containWithinAspectRatio){if(a%2){const e=t.height/i.aspectRatio;return{width:Math.max(t.height,t.width*i.aspectRatio),height:Math.max(t.width,e)}}{const e=t.width/i.aspectRatio;return{width:Math.max(t.width,t.height*i.aspectRatio),height:Math.max(t.height,e)}}}return a%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,a.Yz7)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Ct=(()=>{class t{resetCropperPosition(t,e,i){if(!(null==t?void 0:t.nativeElement))return;const a=t.nativeElement;if(i.cropperStaticHeight&&i.cropperStaticWidth)e.x1=0,e.x2=a.offsetWidth>i.cropperStaticWidth?i.cropperStaticWidth:a.offsetWidth,e.y1=0,e.y2=a.offsetHeight>i.cropperStaticHeight?i.cropperStaticHeight:a.offsetHeight;else{const t=Math.min(i.cropperScaledMaxWidth,a.offsetWidth),n=Math.min(i.cropperScaledMaxHeight,a.offsetHeight);if(i.maintainAspectRatio)if(t/i.aspectRatio<n){e.x1=0,e.x2=t;const n=t/i.aspectRatio;e.y1=(a.offsetHeight-n)/2,e.y2=e.y1+n}else{e.y1=0,e.y2=n;const t=n*i.aspectRatio;e.x1=(a.offsetWidth-t)/2,e.x2=e.x1+t}else e.x1=0,e.x2=t,e.y1=0,e.y2=n}}move(t,e,i){const a=this.getClientX(t)-e.clientX,n=this.getClientY(t)-e.clientY;i.x1=e.x1+a,i.y1=e.y1+n,i.x2=e.x2+a,i.y2=e.y2+n}resize(t,e,i,a,n){const r=this.getClientX(t)-e.clientX,s=this.getClientY(t)-e.clientY;switch(e.position){case"left":i.x1=Math.min(Math.max(e.x1+r,i.x2-n.cropperScaledMaxWidth),i.x2-n.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(e.x1+r,i.x2-n.cropperScaledMaxWidth),i.x2-n.cropperScaledMinWidth),i.y1=Math.min(Math.max(e.y1+s,i.y2-n.cropperScaledMaxHeight),i.y2-n.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(e.y1+s,i.y2-n.cropperScaledMaxHeight),i.y2-n.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(e.x2+r,i.x1+n.cropperScaledMaxWidth),i.x1+n.cropperScaledMinWidth),i.y1=Math.min(Math.max(e.y1+s,i.y2-n.cropperScaledMaxHeight),i.y2-n.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(e.x2+r,i.x1+n.cropperScaledMaxWidth),i.x1+n.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(e.x2+r,i.x1+n.cropperScaledMaxWidth),i.x1+n.cropperScaledMinWidth),i.y2=Math.max(Math.min(e.y2+s,i.y1+n.cropperScaledMaxHeight),i.y1+n.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(e.y2+s,i.y1+n.cropperScaledMaxHeight),i.y1+n.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(e.x1+r,i.x2-n.cropperScaledMaxWidth),i.x2-n.cropperScaledMinWidth),i.y2=Math.max(Math.min(e.y2+s,i.y1+n.cropperScaledMaxHeight),i.y1+n.cropperScaledMinHeight);break;case"center":const o=t.scale,c=Math.min(Math.max(n.cropperScaledMinWidth,Math.abs(e.x2-e.x1)*o),n.cropperScaledMaxWidth),l=Math.min(Math.max(n.cropperScaledMinHeight,Math.abs(e.y2-e.y1)*o),n.cropperScaledMaxHeight);i.x1=e.clientX-c/2,i.x2=e.clientX+c/2,i.y1=e.clientY-l/2,i.y2=e.clientY+l/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>a.width&&(i.x1-=i.x2-a.width,i.x2=a.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>a.height&&(i.y1-=i.y2-a.height,i.y2=a.height)}n.maintainAspectRatio&&this.checkAspectRatio(e.position,i,a,n)}checkAspectRatio(t,e,i,a){let n=0,r=0;switch(t){case"top":e.x2=e.x1+(e.y2-e.y1)*a.aspectRatio,n=Math.max(e.x2-i.width,0),r=Math.max(0-e.y1,0),(n>0||r>0)&&(e.x2-=r*a.aspectRatio>n?r*a.aspectRatio:n,e.y1+=r*a.aspectRatio>n?r:n/a.aspectRatio);break;case"bottom":e.x2=e.x1+(e.y2-e.y1)*a.aspectRatio,n=Math.max(e.x2-i.width,0),r=Math.max(e.y2-i.height,0),(n>0||r>0)&&(e.x2-=r*a.aspectRatio>n?r*a.aspectRatio:n,e.y2-=r*a.aspectRatio>n?r:n/a.aspectRatio);break;case"topleft":e.y1=e.y2-(e.x2-e.x1)/a.aspectRatio,n=Math.max(0-e.x1,0),r=Math.max(0-e.y1,0),(n>0||r>0)&&(e.x1+=r*a.aspectRatio>n?r*a.aspectRatio:n,e.y1+=r*a.aspectRatio>n?r:n/a.aspectRatio);break;case"topright":e.y1=e.y2-(e.x2-e.x1)/a.aspectRatio,n=Math.max(e.x2-i.width,0),r=Math.max(0-e.y1,0),(n>0||r>0)&&(e.x2-=r*a.aspectRatio>n?r*a.aspectRatio:n,e.y1+=r*a.aspectRatio>n?r:n/a.aspectRatio);break;case"right":case"bottomright":e.y2=e.y1+(e.x2-e.x1)/a.aspectRatio,n=Math.max(e.x2-i.width,0),r=Math.max(e.y2-i.height,0),(n>0||r>0)&&(e.x2-=r*a.aspectRatio>n?r*a.aspectRatio:n,e.y2-=r*a.aspectRatio>n?r:n/a.aspectRatio);break;case"left":case"bottomleft":e.y2=e.y1+(e.x2-e.x1)/a.aspectRatio,n=Math.max(0-e.x1,0),r=Math.max(e.y2-i.height,0),(n>0||r>0)&&(e.x1+=r*a.aspectRatio>n?r*a.aspectRatio:n,e.y2-=r*a.aspectRatio>n?r:n/a.aspectRatio);break;case"center":e.x2=e.x1+(e.y2-e.y1)*a.aspectRatio,e.y2=e.y1+(e.x2-e.x1)/a.aspectRatio;const t=Math.max(0-e.x1,0),s=Math.max(e.x2-i.width,0),o=Math.max(e.y2-i.height,0),c=Math.max(0-e.y1,0);(t>0||s>0||o>0||c>0)&&(e.x1+=o*a.aspectRatio>t?o*a.aspectRatio:t,e.x2-=c*a.aspectRatio>s?c*a.aspectRatio:s,e.y1+=c*a.aspectRatio>s?c:s/a.aspectRatio,e.y2-=o*a.aspectRatio>t?o:t/a.aspectRatio)}}getClientX(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}getClientY(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,a.Yz7)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Mt=(()=>{class t{constructor(t,e,i,n,r){this.cropService=t,this.cropperPositionService=e,this.loadImageService=i,this.sanitizer=n,this.cd=r,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.settings=new vt,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.moveTypes=bt,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new a.vpe,this.startCropImage=new a.vpe,this.imageLoaded=new a.vpe,this.cropperReady=new a.vpe,this.loadImageFailed=new a.vpe,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage&&this.loadedImage.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}onResize(){this.loadedImage&&(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,a.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){t.key>="1"&&t.key<="9"&&(this.settings.stepSize=+t.key)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const e=t.shiftKey?bt.Resize:bt.Move,i=t.altKey?function(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}(t.key):function(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}(t.key),a=function(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(a),this.moveStop()}startMove(t,e,i=null){this.moveStart&&this.moveStart.active&&this.moveStart.type===bt.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper))}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:bt.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===bt.Move?(this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0)):this.moveStart.type===bt.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===bt.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image){const t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.loadedImage.transformed.image){this.startCropImage.emit();const t=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=t&&this.imageCropped.emit(t),t}return null}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(At),a.Y36(Ct),a.Y36(yt),a.Y36(dt.H7),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){if(1&t&&(a.Gf(gt,7),a.Gf(ut,5)),2&t){let t;a.iGM(t=a.CRH())&&(e.wrapper=t.first),a.iGM(t=a.CRH())&&(e.sourceImage=t.first)}},hostVars:4,hostBindings:function(t,e){1&t&&a.NdJ("resize",function(){return e.onResize()},!1,a.Jf7)("mousemove",function(t){return e.moveImg(t)},!1,a.evT)("touchmove",function(t){return e.moveImg(t)},!1,a.evT)("mouseup",function(){return e.moveStop()},!1,a.evT)("touchend",function(){return e.moveStop()},!1,a.evT),2&t&&(a.Udp("text-align",e.alignImage),a.ekj("disabled",e.disabled))},inputs:{format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[a.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(a.TgZ(0,"div",null,0),a.YNc(2,mt,2,5,"img",1),a._UZ(3,"div",2),a.YNc(4,xt,3,15,"div",3),a.qZA()),2&t&&(a.Udp("background",e.imageVisible&&e.backgroundColor),a.xp6(2),a.Q6J("ngIf",e.safeImgDataUrl),a.xp6(1),a.Udp("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),a.xp6(1),a.Q6J("ngIf",e.imageVisible))},directives:[F.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),t})(),Zt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez]]}),t})(),St=(()=>{class t{constructor(t,e,i,a){this.data=t,this.dialogRef=e,this.httpService=i,this.loaderService=a,this.isPopup=!1}imageCropped(t){this.croppedImage=t.base64}save(){this.loaderService.show();const t=this.data.inputEvent.target.files[0];let e;fetch(this.croppedImage).then(t=>t.blob()).then(i=>{(0,et.of)(i).pipe((0,f.U)(e=>new File([e],t.name,{type:"image/png"})),(0,x.w)(t=>(e=t,this.httpService.uploadFile(t)))).pipe((0,ht.x)(()=>this.loaderService.hide())).subscribe(t=>{console.log(t),this.close({imageUrl:t,base64:this.croppedImage,image:e})})}).catch(()=>this.loaderService.hide())}close(t){this.dialogRef.close({imageUrl:t.imageUrl||null,base64:t.base64||null,image:t.image||null})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(tt.WI),a.Y36(tt.so),a.Y36(y),a.Y36(it.D))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-drag-and-drop-image-popup"]],decls:5,vars:4,consts:[["submitBtnName","save",3,"isPopup","handleSubmit","handleCancel"],["header",""],["content","",1,"drag-and-drop-container"],["format","png",3,"aspectRatio","imageChangedEvent","maintainAspectRatio","imageCropped"]],template:function(t,e){1&t&&(a.TgZ(0,"app-confirm-popup-wrapper",0),a.NdJ("handleSubmit",function(){return e.save()})("handleCancel",function(){return e.close({})}),a.ynx(1,1),a._uU(2," Drop And Drag The Image "),a.BQk(),a.TgZ(3,"div",2),a.TgZ(4,"image-cropper",3),a.NdJ("imageCropped",function(t){return e.imageCropped(t)}),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.Q6J("isPopup",e.isPopup),a.xp6(4),a.Q6J("aspectRatio",e.data.aspectRatio)("imageChangedEvent",e.data.inputEvent)("maintainAspectRatio",!0))},directives:[lt,Mt],styles:[".drag-and-drop-container[_ngcontent-%COMP%]{padding:10px}"]}),t})();var wt=i(9861),_t=i(3169);const Tt=["inputFile"],It=["inputValue"];function qt(t,e){1&t&&(a.TgZ(0,"mat-icon",7),a._uU(1,"attach_file"),a.qZA())}const Ot=[[["","ngxMatFileInputIcon",""]]],zt=["[ngxMatFileInputIcon]"];let Rt=0;const Pt=(0,D.FD)(class{constructor(t,e,i,a){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=a}});let Ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","ngxMatFileInputIcon",""]]}),t})(),Bt=(()=>{class t extends Pt{constructor(t,e,i,a,n,s,o){super(o,n,s,a),this._elementRef=t,this._platform=e,this._cd=i,this.ngControl=a,this.color="primary",this.fileNames=null,this._uid="ngx-mat-fileinput-"+Rt++,this.stateChanges=new r.xQ,this.focused=!1,this.controlType="ngx-mat-file-input",this.autofilled=!1,this._onTouched=()=>{},this._onChange=()=>{},this._disabled=!1,this._multiple=!1,this.placeholder="Choose a file",this.separator=",",this._required=!1,this._readonly=!0,this.id=this.id,this.ngControl&&(this.ngControl.valueAccessor=this)}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=(0,wt.Ig)(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get multiple(){return this._multiple}set multiple(t){this._multiple=(0,wt.Ig)(t)}get required(){return this._required}set required(t){this._required=(0,wt.Ig)(t)}get value(){return this._value}set value(t){this._value=t}get readonly(){return this._readonly}set readonly(t){this._readonly=(0,wt.Ig)(t)}get accept(){return this._accept}set accept(t){this._accept=t}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete()}ngDoCheck(){this.ngControl&&this.updateErrorState()}writeValue(t){this._updateInputValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}focus(t){this._inputValueRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_markAsTouched(){this._onTouched(),this._cd.markForCheck(),this.stateChanges.next()}_isBadInput(){let t=this._inputValueRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._inputValueRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){return this.focused||!this.empty}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}openFilePicker(t){this._inputFileRef.nativeElement.click(),t&&(t.preventDefault(),t.stopPropagation()),this._markAsTouched()}handleFiles(t){if(t.length>0){const e=new Array;for(let i=0;i<t.length;i++)e.push(t.item(i));this._updateInputValue(e),this._resetInputFile(),this._onChange(this.multiple?e:e[0])}}onContainerClick(t){}_resetInputFile(){this._inputFileRef.nativeElement.value=""}_updateInputValue(t){let e=null;t&&(e=Array.isArray(t)?this._multiple?t.map(t=>t.name).join(this.separator):t[0].name:null!=t.name?t.name:null),this._inputValueRef.nativeElement.value=e}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.SBq),a.Y36(_t.t4),a.Y36(a.sBO),a.Y36(Z.a5,10),a.Y36(Z.F,8),a.Y36(Z.sg,8),a.Y36(D.rD))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ngx-mat-file-input"]],contentQueries:function(t,e,i){if(1&t&&a.Suo(i,Ut,5),2&t){let t;a.iGM(t=a.CRH())&&(e._customIcon=t.first)}},viewQuery:function(t,e){if(1&t&&(a.Gf(Tt,7),a.Gf(It,7)),2&t){let t;a.iGM(t=a.CRH())&&(e._inputFileRef=t.first),a.iGM(t=a.CRH())&&(e._inputValueRef=t.first)}},hostAttrs:[1,"ngx-mat-file-input"],inputs:{color:"color",placeholder:"placeholder",separator:"separator",id:"id",disabled:"disabled",multiple:"multiple",required:"required",value:"value",readonly:"readonly",accept:"accept",errorStateMatcher:"errorStateMatcher"},exportAs:["ngx-mat-file-input"],features:[a._Bn([{provide:U.Eo,useExisting:(0,a.Gpc)(()=>t)}]),a.qOj,a.TTD],ngContentSelectors:zt,decls:8,vars:13,consts:[["autocomplete","off",1,"mat-input-element","mat-form-field-autofill-control",3,"disabled","required"],["inputValue",""],[1,"mat-form-field-suffix"],["matSuffix","","mat-icon-button","","type","button",1,"button-browse",3,"color","disabled","click"],["class","ngx-mat-file-input--default-icon",4,"ngIf"],["type","file",1,"input-file",3,"multiple","accept","change"],["inputFile",""],[1,"ngx-mat-file-input--default-icon"]],template:function(t,e){1&t&&(a.F$t(Ot),a._UZ(0,"input",0,1),a.TgZ(2,"div",2),a.TgZ(3,"button",3),a.NdJ("click",function(t){return e.openFilePicker(t)}),a.YNc(4,qt,2,0,"mat-icon",4),a.Hsn(5),a.qZA(),a.qZA(),a.TgZ(6,"input",5,6),a.NdJ("change",function(t){return e.handleFiles(t.target.files)}),a.qZA()),2&t&&(a.Q6J("disabled",e.disabled)("required",e.required),a.uIk("id",e.id)("placeholder",e.placeholder)("readonly",e.readonly||null)("aria-describedby",e._ariaDescribedby||null)("aria-invalid",e.errorState)("aria-required",e.required.toString()),a.xp6(3),a.Q6J("color",e.color)("disabled",e.disabled),a.xp6(1),a.Q6J("ngIf",!e._customIcon),a.xp6(2),a.Q6J("multiple",e.multiple)("accept",e.accept))},directives:[k.lW,U.R9,F.O5,V.Hw],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .ngx-mat-file-input--default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .ngx-mat-file-input--default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .ngx-mat-file-input--default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .ngx-mat-file-input--default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .ngx-mat-file-input--default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .ngx-mat-file-input--default-icon{margin:auto}.ngx-mat-file-input{display:flex;line-height:18px;height:18px;align-items:center}.ngx-mat-file-input .input-file{display:block;visibility:hidden;width:0;height:0}"],encapsulation:2}),t})(),kt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,k.ot,V.Ps,U.lN,B.c]]}),t})(),Ht=(()=>{class t extends H{constructor(t,e,i){super(t),this.injector=t,this.dialog=e,this.cdr=i,this.aspectRatio=1,this.accept="image/jpeg,image/jpg,image/png",this.size=5e6,this.image=null}ngOnInit(){}selectImage(t,e){this.dialog.open(St,{data:{inputEvent:t,inputRef:e,aspectRatio:this.aspectRatio}}).afterClosed().subscribe(t=>{t&&(this.image=t.image,this.control.patchValue(t.imageUrl),this.cdr.markForCheck())})}selectFile(t,e){t.stopPropagation(),t.preventDefault(),e.click()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.zs3),a.Y36(tt.uw),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-drag-and-drop-image"]],inputs:{aspectRatio:"aspectRatio"},features:[a._Bn([{provide:Z.JU,useExisting:(0,a.Gpc)(()=>t),multi:!0}]),a.qOj],decls:5,vars:8,consts:[["type","file",1,"d-hidden",3,"accept","size","change"],["inputRef",""],[1,"w-100"],["color","primary",3,"placeholder","ngModel","multiple","accept","click","ngModelChange"]],template:function(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"input",0,1),a.NdJ("change",function(i){a.CHM(t);const n=a.MAs(1);return e.selectImage(i,n)}),a.qZA(),a.TgZ(2,"mat-form-field",2),a.TgZ(3,"ngx-mat-file-input",3),a.NdJ("click",function(i){a.CHM(t);const n=a.MAs(1);return e.selectFile(i,n)})("ngModelChange",function(t){return e.image=t}),a.ALo(4,"translate"),a.qZA(),a.qZA()}2&t&&(a.Q6J("accept",e.accept)("size",e.size),a.xp6(3),a.Q6J("placeholder",a.lcZ(4,6,"chooseImage"))("ngModel",e.image)("multiple",!0)("accept",e.accept))},directives:[U.KE,Bt,Z.JJ,Z.On],pipes:[h.X$],styles:[""],changeDetection:0}),t})(),Et=(()=>{class t{constructor(t,e,i,a,n){this.data=t,this.dialogRef=e,this.fb=i,this.budgetService=a,this.loaderService=n,this.createBudgetForm=this.fb.group({name:this.fb.control(t?t.name:null,[Z.kI.required]),imageUrl:this.fb.control(t?t.imageUrl:null,[Z.kI.required]),amountGoal:this.fb.control(t?t.amountGoal:null,[Z.kI.required,Z.kI.min(1)])})}ngOnInit(){this.budgetService.getBudgets().subscribe(t=>{console.log(t)})}createBudget(){this.loaderService.show(),(0,et.of)(this.data).pipe((0,f.U)(t=>!!t),(0,x.w)(t=>t?this.budgetService.editBudget(this.data.id||"",this.createBudgetForm.value):this.budgetService.createBudget(this.createBudgetForm.value))).subscribe(()=>{this.loaderService.hide(),this.dialogRef.close()})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(tt.WI),a.Y36(tt.so),a.Y36(Z.qu),a.Y36(z),a.Y36(it.D))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-create-edit-budget"]],decls:16,vars:12,consts:[[3,"disableSubmitBtn","submitBtnName","handleSubmit","handleCancel"],["header",""],["content","","autocomplete","off",1,"d-flex","column",3,"formGroup","ngSubmit"],["appearance","fill"],["formControlName","name","matInput",""],["formControlName","amountGoal","matInput",""],["formControlName","imageUrl"]],template:function(t,e){1&t&&(a.TgZ(0,"app-confirm-popup-wrapper",0),a.NdJ("handleSubmit",function(){return e.createBudget()})("handleCancel",function(){return e.dialogRef.close()}),a.ynx(1,1),a._uU(2),a.ALo(3,"translate"),a.BQk(),a.TgZ(4,"form",2),a.NdJ("ngSubmit",function(){return e.createBudget()}),a.TgZ(5,"mat-form-field",3),a.TgZ(6,"mat-label"),a._uU(7),a.ALo(8,"translate"),a.qZA(),a._UZ(9,"input",4),a.qZA(),a.TgZ(10,"mat-form-field",3),a.TgZ(11,"mat-label"),a._uU(12),a.ALo(13,"translate"),a.qZA(),a._UZ(14,"input",5),a.qZA(),a._UZ(15,"app-drag-and-drop-image",6),a.qZA(),a.qZA()),2&t&&(a.s9C("submitBtnName",e.data?"edit":"create"),a.Q6J("disableSubmitBtn",e.createBudgetForm.invalid),a.xp6(2),a.Oqu(a.lcZ(3,6,"create")),a.xp6(2),a.Q6J("formGroup",e.createBudgetForm),a.xp6(3),a.Oqu(a.lcZ(8,8,"budgetName")),a.xp6(5),a.Oqu(a.lcZ(13,10,"amount")))},directives:[lt,Z._Y,Z.JL,Z.sg,U.KE,U.hX,Z.Fj,B.Nt,Z.JJ,Z.u,Ht],pipes:[h.X$],styles:[".mat-form-field[_ngcontent-%COMP%]{display:block;width:100%}"]}),t})();var Ft=i(4411);let Dt=(()=>{class t{constructor(t,e){this.bottomSheetRef=t,this.dialog=e}openLink(t,e){"create-edit-budget"===e&&this.dialog.open(Et,{disableClose:!0}),this.bottomSheetRef.dismiss(),t.preventDefault()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(Ft.oL),a.Y36(tt.uw))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-dashboard-wish-list-controls"]],decls:8,vars:6,consts:[["href","https://keep.google.com/","mat-list-item","",3,"click"],["mat-line",""]],template:function(t,e){1&t&&(a.TgZ(0,"mat-nav-list"),a.TgZ(1,"a",0),a.NdJ("click",function(t){return e.openLink(t,"create-edit-budget")}),a.TgZ(2,"span",1),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"span",1),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Oqu(a.lcZ(4,2,"createBudget")),a.xp6(3),a.Oqu(a.lcZ(7,4,"aPlaceForTheCollectSum")))},directives:[$.Hk,$.Tg,D.X2],pipes:[h.X$],styles:[""]}),t})(),Qt=(()=>{class t{constructor(t,e){this.budgetService=t,this.dialog=e}delete(){this.dialog.open(lt,{data:{message:"areYouSureDeleteTheBudget",title:"info"}}).afterClosed().subscribe(t=>{t&&t.isConfirm&&this.budgetService.deleteBudget(this.budget.id||"").subscribe()})}edit(){this.dialog.open(Et,{data:this.budget})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(z),a.Y36(tt.uw))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-budget-card"]],inputs:{budget:"budget"},decls:33,vars:18,consts:[["mat-card-image","","alt","budget img",3,"src"],["role","list"],["role","listitem"],["mat-list-icon",""],["mat-line",""],["mat-mini-fab","","mat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"mat-card"),a.TgZ(1,"mat-card-title"),a.TgZ(2,"span"),a._uU(3),a.qZA(),a.qZA(),a._UZ(4,"img",0),a.TgZ(5,"mat-card-content"),a.TgZ(6,"mat-list",1),a.TgZ(7,"mat-list-item",2),a.TgZ(8,"mat-icon",3),a._uU(9,"payment"),a.qZA(),a.TgZ(10,"div",4),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.TgZ(13,"div",4),a._uU(14),a.ALo(15,"currency"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"mat-list",1),a.TgZ(17,"mat-list-item",2),a.TgZ(18,"mat-icon",3),a._uU(19,"check_circle_outline"),a.qZA(),a.TgZ(20,"div",4),a._uU(21),a.ALo(22,"translate"),a.qZA(),a.TgZ(23,"div",4),a._uU(24),a.ALo(25,"currency"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"mat-card-actions"),a.TgZ(27,"button",5),a.NdJ("click",function(){return e.delete()}),a.TgZ(28,"mat-icon"),a._uU(29,"delete"),a.qZA(),a.qZA(),a.TgZ(30,"button",5),a.NdJ("click",function(){return e.edit()}),a.TgZ(31,"mat-icon"),a._uU(32,"edit"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Oqu(e.budget.name),a.xp6(1),a.Q6J("src",e.budget.imageUrl,a.LSH),a.xp6(7),a.Oqu(a.lcZ(12,6,"balance")),a.xp6(3),a.Oqu(a.Dn7(15,8,e.budget.balance||0,e.budget.currencyCode||"UAH","symbol-narrow")),a.xp6(7),a.Oqu(a.lcZ(22,12,"goal")),a.xp6(3),a.Oqu(a.Dn7(25,14,e.budget.amountGoal||0,e.budget.currencyCode||"UAH","symbol-narrow")))},directives:[P.a8,P.n5,P.G2,P.dn,$.i$,$.Tg,V.Hw,$.Nh,D.X2,P.hq,k.lW],pipes:[h.X$,F.H9],styles:[""],changeDetection:0}),t})();function Yt(t,e){1&t&&a._UZ(0,"app-budget-card",5),2&t&&a.Q6J("budget",e.$implicit)}let Jt=(()=>{class t{constructor(t,e,i){this._bottomSheet=t,this.budgetService=e,this.cdr=i,this.budgets=[]}ngOnInit(){this.budgetService.getBudgets().subscribe(t=>{this.budgets=t,this.cdr.markForCheck()})}openLink(){this._bottomSheet.open(Dt)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(Ft.ch),a.Y36(z),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-dashboard-wish-list"]],decls:9,vars:1,consts:[[1,"content"],[1,"controls"],["mat-mini-fab","","color","accent","aria-label","Example icon button with a menu icon",3,"click"],[1,"budget-list"],[3,"budget",4,"ngFor","ngForOf"],[3,"budget"]],template:function(t,e){1&t&&(a.TgZ(0,"main",0),a._UZ(1,"mat-divider"),a.TgZ(2,"div",1),a.TgZ(3,"button",2),a.NdJ("click",function(){return e.openLink()}),a.TgZ(4,"mat-icon"),a._uU(5,"view_headline"),a.qZA(),a.qZA(),a.qZA(),a._UZ(6,"mat-divider"),a.TgZ(7,"div",3),a.YNc(8,Yt,1,1,"app-budget-card",4),a.qZA(),a.qZA()),2&t&&(a.xp6(8),a.Q6J("ngForOf",e.budgets))},directives:[C.d,k.lW,V.Hw,F.sg,Qt],styles:[".controls[_ngcontent-%COMP%]{padding:.3em 1em;display:flex;flex-direction:row-reverse}.budget-list[_ngcontent-%COMP%]{margin-top:1em;display:grid;grid-gap:.5em;gap:.5em;grid-template-columns:1fr 1fr 1fr}"]}),t})(),Lt=(()=>{class t{constructor(t,e,i){this.router=t,this.route=e,this.dashboardActionService=i}ngOnInit(){}changeTab({tab:t}){this.dashboardActionService.changeTab(t),this.router.navigate([],{relativeTo:this.route,queryParamsHandling:"merge",queryParams:{page:t.textLabel.toLowerCase()}})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(n.F0),a.Y36(n.gz),a.Y36(s))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-dashboard"]],decls:14,vars:12,consts:[["dynamicHeight","","mat-align-tabs","center",3,"selectedTabChange"],[3,"label"]],template:function(t,e){1&t&&(a._UZ(0,"app-login-toolbar"),a.TgZ(1,"mat-tab-group",0),a.NdJ("selectedTabChange",function(t){return e.changeTab(t)}),a.TgZ(2,"mat-tab",1),a.ALo(3,"translate"),a._UZ(4,"app-dashboard-info"),a.qZA(),a.TgZ(5,"mat-tab",1),a.ALo(6,"translate"),a._UZ(7,"app-dashboard-manage"),a.qZA(),a.TgZ(8,"mat-tab",1),a.ALo(9,"translate"),a._UZ(10,"app-dashboard-history"),a.qZA(),a.TgZ(11,"mat-tab",1),a.ALo(12,"translate"),a._UZ(13,"app-dashboard-wish-list"),a.qZA(),a.qZA()),2&t&&(a.xp6(2),a.s9C("label",a.lcZ(3,4,"dashboard")),a.xp6(3),a.s9C("label",a.lcZ(6,6,"manage")),a.xp6(3),a.s9C("label",a.lcZ(9,8,"history")),a.xp6(3),a.s9C("label",a.lcZ(12,10,"wishList")))},directives:[p,d.SP,d.uX,M,X,K,Jt],pipes:[h.X$],styles:[""]}),t})();var Wt=i(4007),jt=i(4014);let Nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[Wt.q,h.aw,jt.d]]}),t})(),Xt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Wt.q,h.aw]]}),t})(),$t=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Wt.q,h.aw]]}),t})(),Vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[Zt,Xt,Wt.q,kt,Z.UX,Z.u5,$t,h.aw]]}),t})(),Gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,h.aw,Wt.q,Vt,Z.UX]]}),t})(),Kt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Wt.q]]}),t})(),te=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Wt.q,Z.UX]]}),t})(),ee=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Wt.q,Z.UX]]}),t})(),ie=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Wt.q,h.aw,Z.UX,Kt,te,ee]]}),t})(),ae=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Wt.q,h.aw]]}),t})(),ne=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Xt,h.aw,Z.UX,Wt.q,Vt,$t]]}),t})(),re=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Wt.q,h.aw]]}),t})(),se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Kt,ae,Wt.q,ne,Vt,re]]}),t})(),oe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[F.ez,Kt,Wt.q,h.aw]]}),t})();const ce=[{path:"",component:Lt}];let le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[s],imports:[[n.Bz.forChild(ce),Nt,Wt.q,h.aw,Gt,ie,Kt,se,oe]]}),t})()}}]);